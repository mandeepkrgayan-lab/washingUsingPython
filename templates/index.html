
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>WashSmart</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root {
      --primary-color: #0093E9;
      --secondary-color: #80D0C7;
      --text-color: #ffffff;
      --card-bg: rgba(255, 255, 255, 0.1);
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
      color: var(--text-color);
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
    }

    #container {
      background: var(--card-bg);
      padding: 30px 20px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      max-width: 400px;
      width: 100%;
    }

    h2 {
      margin-top: 15px;
    }

    input, button {
      padding: 12px;
      font-size: 16px;
      border-radius: 8px;
      border: none;
      margin: 10px 0;
      width: 100%;
      max-width: 100%;
      box-sizing: border-box;
    }

    button {
      background: #ffffff;
      color: #333;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background: #eeeeee;
    }

    .loader {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #fff;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
      margin: 10px auto;
      display: none;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .logo {
      width: 80px;
      height: 80px;
      object-fit: contain;
      margin-bottom: 10px;
    }

    .subscription-buttons button {
      margin: 5px 0;
    }
  </style>
</head>
<body>
  <div id="container">
    <img src="https://cdn-icons-png.flaticon.com/512/3322/3322056.png" alt="Washing Machine Logo" class="logo">
    <h2>Tycoon2.0 WashSmart</h2>
    <input type="text" id="phone" placeholder="Enter phone number" />
    <button onclick="check()">Check</button>
    <div class="loader" id="loader"></div>
    <div id="result"></div>
  </div>

  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script>
    function showLoader(show) {
      document.getElementById("loader").style.display = show ? "block" : "none";
    }

    function check() {
      const phone = document.getElementById("phone").value;
      if (!phone) return alert("Enter phone number");
      showLoader(true);
      fetch(`/check?phone=${phone}`)
        .then(res => res.json())
        .then(data => {
          showLoader(false);
          const result = document.getElementById("result");
          result.innerHTML = data.message;
          if (data.action === 'pay') {
            result.innerHTML += `
              <div class="subscription-buttons">
                <button onclick="pay('${phone}', 79, 1)">Daily - ₹79</button>
                <button onclick="pay('${phone}', 119, 7)">Weekly - ₹119</button>
                <button onclick="pay('${phone}', 199, 30)">Monthly - ₹199</button>
              </div>
            `;
          }
        });
    }

    function pay(phone, amount, days) {
      const options = {
        key: "rzp_test_NhQFMV57BI5o45",
        amount: amount * 100,
        currency: "INR",
        name: "WashSmart",
        description: `${days} day subscription`,
        handler: function () {
          fetch(`/update_expiry`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ phone, days })
          }).then(() => check());
        },
        prefill: { contact: phone }
      };
      const rzp = new Razorpay(options);
      rzp.open();
    }

    function turnOn() {
      fetch('/turn_on', {
        method: 'POST',
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ phone: document.getElementById("phone").value })
      }).then(() => check());
    }
    
  function forceTurnOff() {
    fetch("/force_turn_off", {
      method: "POST"
    }).then(() => check());
  }
  </script>
  <button onclick="forceTurnOff()" style="margin-top: 10px; font-size: 12px; padding: 6px 10px;">Turn Off</button>
    <footer style="background-color: #f8f9fa; padding: 20px; text-align: center;">
    <nav>
    <a href="#contact">Contact Us</a>
    <a href="#terms">Terms and Conditions</a>
    <a href="#refund">Cancellation & Refund</a>
    <a href="#privacy">Privacy Policy</a>
  </nav>

  <section id="contact">
    <h2>Contact Us</h2>
    <p>Phone: 7664000017</p>
    <p>Email: <a href="mailto:mkrgayan@gmail.com">mkrgayan@gmail.com</a></p>
  </section>

  <section id="terms">
    <h2>Terms and Conditions</h2>
    <p>
      By accessing or using our services, you agree to be bound by these terms. We reserve the right to update or modify these terms at any time. Users are responsible for regularly reviewing these terms.
    </p>
  </section>

  <section id="refund">
    <h2>Cancellation and Refund Policy</h2>
    <p>
      All payments are non-refundable unless there is a proven issue with the service. Cancellations must be requested within 2 hours of payment. Refunds (if applicable) will be processed within 7 working days.
    </p>
  </section>

  <section id="privacy">
    <h2>Privacy Policy</h2>
    <p>
      We value your privacy and are committed to protecting your personal data. We do not share your information with third parties without your consent. Data is stored securely and used only for service-related communication.
    </p>
  </section>
  <p>&copy; 2025 Mandeep. All rights reserved.</p>
</footer>
  

</body>
</html>
